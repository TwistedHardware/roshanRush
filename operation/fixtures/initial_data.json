[{"pk": 1, "model": "operation.location", "fields": {"name": "Data", "parent": null, "help": "Access data sources and destinations"}},
{"pk": 2, "model": "operation.location", "fields": {"name": "Math", "parent": null, "help": "Mathematical operations"}},
{"pk": 3, "model": "operation.location", "fields": {"name": "Libraries", "parent": null, "help": "Tools to load libraries."}},
{"pk": 1, "model": "operation.link", "fields": {"optional": false, "type": "output", "name": "Output", "content_type": "text/plain"}},
{"pk": 2, "model": "operation.link", "fields": {"optional": true, "type": "input", "name": "Input1", "content_type": "text/plain"}},
{"pk": 3, "model": "operation.link", "fields": {"optional": true, "type": "input", "name": "Input2", "content_type": "text/plain"}},
{"pk": 4, "model": "operation.link", "fields": {"optional": true, "type": "input", "name": "Input3", "content_type": "text/plain"}},
{"pk": 5, "model": "operation.link", "fields": {"optional": true, "type": "input", "name": "Input4", "content_type": "text/plain"}},
{"pk": 1, "model": "operation.operation", "fields": {"operation_code": "o[\"Output\"] = \"Hello World!\"", "name": "Hello World!", "location": 1}},
{"pk": 2, "model": "operation.operation", "fields": {"operation_code": "o[\"Output\"] = p[\"X\"] + p[\"Y\"]", "name": "Add", "location": 2}},
{"pk": 3, "model": "operation.operation", "fields": {"operation_code": "o[\"Output\"] = p[\"X\"] - p[\"Y\"]", "name": "Subtract", "location": 2}},
{"pk": 4, "model": "operation.operation", "fields": {"operation_code": "o[\"Output\"] = p[\"X\"] / p[\"Y\"]", "name": "Divide", "location": 2}},
{"pk": 5, "model": "operation.operation", "fields": {"operation_code": "o[\"Output\"] = p[\"X\"] * p[\"Y\"]", "name": "Multiply", "location": 2}},
{"pk": 6, "model": "operation.operation", "fields": {"operation_code": "o[\"Output\"] = p[\"X\"] ** p[\"Y\"]", "name": "Exponentiation", "location": 2}},
{"pk": 7, "model": "operation.operation", "fields": {"operation_code": "import pandas as pd\r\nfrom import_data.models import ImportCSV\r\ncsv_model = ImportCSV.objects.all().get(id=p[\"csv_id\"])\r\ncsv_data = pd.read_csv(csv_model.file)\r\nfor counter in range(len(csv_data)):\r\n    record = csv_model.data_set.record_set.all().create(data_set=csv_model.data_set)\r\n    for column in csv_model.csvcolumn_set.all():\r\n        record.feature(column.feature, value=csv_data[column.csv_column][counter])\r\no[\"Output\"] = csv_model", "name": "StoreCSV", "location": 1}},
{"pk": 8, "model": "operation.operation", "fields": {"operation_code": "from data_set.models import DataSet\r\no[\"Output\"] = DataSet.objects.all().get(pk=p[\"data_set_id\"])", "name": "Load DataSet", "location": 1}},
{"pk": 9, "model": "operation.operation", "fields": {"operation_code": "o[\"Output\"] = i[\"Input1\"].record_set.all()", "name": "Load Records", "location": 1}},
{"pk": 10, "model": "operation.operation", "fields": {"operation_code": "from data_set.models import NumberFeature\r\no[\"Output\"] = NumberFeature.objects.all().filter(record__data_set__id=i[\"Input1\"].id)", "name": "Load Number Features", "location": 1}},
{"pk": 11, "model": "operation.operation", "fields": {"operation_code": "from data_set.models import BooleanFeature\r\no[\"Output\"] = BooleanFeature.objects.all().filter(record__data_set__id=i[\"Input1\"].id)", "name": "Load Boolean features", "location": 1}},
{"pk": 12, "model": "operation.operation", "fields": {"operation_code": "from data_set.models import DateFeature\r\no[\"Output\"] = DateFeature.objects.all().filter(record__data_set__id=i[\"Input1\"].id)", "name": "Load Date Features", "location": 1}},
{"pk": 13, "model": "operation.operation", "fields": {"operation_code": "from data_set.models import TextFeature\r\no[\"Output\"] = TextFeature.objects.all().filter(record__data_set__id=i[\"Input1\"].id)", "name": "Load Text Feature", "location": 1}},
{"pk": 14, "model": "operation.operation", "fields": {"operation_code": "from data_set.models import FileFeature\r\no[\"Output\"] = FileFeature.objects.all().filter(record__data_set__id=i[\"Input1\"].id)", "name": "Load File Feature", "location": 1}},
{"pk": 15, "model": "operation.operation", "fields": {"operation_code": "from data_set.models import RecordLinkFeature\r\no[\"Output\"] = RecordLinkFeature.objects.all().filter(record__data_set__id=i[\"Input1\"].id)", "name": "Load Record Link Features", "location": 1}},
{"pk": 16, "model": "operation.operation", "fields": {"operation_code": "i[\"Input1\"].delete()", "name": "Delete", "location": 1}},
{"pk": 17, "model": "operation.operation", "fields": {"operation_code": "qs_filter ={\"feature__name\": p[\"feature_name\"], \"value%s\" % p[\"comparison_operator\"]: p[\"value\"]}\r\no[\"Output\"] = i[\"Input1\"].filter(**qs_filter)", "name": "Filter Features by Value", "location": 1}},
{"pk": 18, "model": "operation.operation", "fields": {"operation_code": "from data_set.models import Record\r\nid_list = [id[0] for id in list(set(i[\"Input1\"].values_list(\"record__id\")))]\r\no[\"Output\"] = Record.objects.all().filter(id__in=id_list)", "name": "Get Record from Features", "location": 1}},
{"pk": 19, "model": "operation.operation", "fields": {"operation_code": "import pandas as pd\r\ndf=pd.DataFrame.from_records(i[\"Input1\"].values(\"record_id\",\"feature__name\",\"value\"))\r\no[\"Output\"]=df.pivot(index=\"record_id\", columns=\"feature__name\", values=\"value\")", "name": "Features to DataFrame", "location": 1}},
{"pk": 20, "model": "operation.operation", "fields": {"operation_code": "from datetime import datetime\r\nimport pandas as pd\r\nimport dicom\r\nimport re\r\nfrom django.conf import settings\r\nfrom django.core.files import File\r\nfrom import_data.models import ImportDICOM\r\ndicom_model = ImportDICOM.objects.all().get(id=p[\"dicom_id\"])\r\nfor dicom_file in dicom_model.dicomfile_set.all():\r\n    record = dicom_model.data_set.record_set.all().create(data_set=dicom_model.data_set)\r\n    feature = record.textfeature_set.all().get(feature__name=\"DICOM File\").feature\r\n    record.feature(feature, value=dicom_file.file.name)\r\n    ds = dicom.read_file(\"%s/%s\" % (settings.MEDIA_ROOT, dicom_file.file.name))\r\n    for date_feature in record.datefeature_set.all().exclude(feature__name=\"PatientBirthDate\"):\r\n        temp_date = getattr(ds, \"%sDate\" % date_feature.feature.name[:-8])\r\n        temp_time = getattr(ds, \"%sTime\" % date_feature.feature.name[:-8])\r\n        date_feature.value = datetime.strptime(\"%s%s\" % (temp_date, temp_time), \"%Y%m%d%H%M%S\")\r\n        date_feature.save()\r\n    date_feature = record.datefeature_set.all().get(feature__name=\"PatientBirthDate\")\r\n    date_feature.value =  datetime.strptime(getattr(ds, \"PatientBirthDate\"), \"%Y%m%d\")\r\n    date_feature.save()\r\n    for number_feature in record.numberfeature_set.all():\r\n        temp_number = getattr(ds, number_feature.feature.name)\r\n        number_feature.value = re.sub(\"[^0-9.-]\", \"\", str(temp_number))\r\n        number_feature.save()\r\n    for text_feature in record.textfeature_set.all().exclude(feature__name=\"DICOM File\"):\r\n        temp_text = getattr(ds, text_feature.feature.name)\r\n        text_feature.value = str(temp_text)\r\n        text_feature.save()\r\no[\"Output\"] = dicom_model", "name": "StoreDICOM", "location": 1}},
{"pk": 1, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 2, "name": "X", "assigned_link": 6, "help": "First Number to be added"}},
{"pk": 2, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 2, "name": "Y", "assigned_link": 7, "help": "Second Number to be added"}},
{"pk": 3, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 3, "name": "X", "assigned_link": 4, "help": "The number to be subtracted from."}},
{"pk": 4, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 3, "name": "Y", "assigned_link": 5, "help": "The number to be subtracted."}},
{"pk": 5, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 4, "name": "X", "assigned_link": 9, "help": "The numerator is a mathematical division."}},
{"pk": 6, "model": "operation.operationparameter", "fields": {"default_value": "1", "operation": 4, "name": "Y", "assigned_link": 10, "help": "The denominator is a mathematical division."}},
{"pk": 7, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 5, "name": "X", "assigned_link": 12, "help": "The first number in a multiplication."}},
{"pk": 8, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 5, "name": "Y", "assigned_link": 13, "help": "The second number in a multiplication."}},
{"pk": 9, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 6, "name": "X", "assigned_link": 15, "help": "The base of the exponentiation."}},
{"pk": 10, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 6, "name": "Y", "assigned_link": 16, "help": "The power of the exponentiation."}},
{"pk": 11, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 7, "name": "csv_id", "assigned_link": 18, "help": "The ID of an Import CSV object."}},
{"pk": 12, "model": "operation.operationparameter", "fields": {"default_value": "\"%Y%m%d\"", "operation": 7, "name": "date_format", "assigned_link": 19, "help": "The format of date and time"}},
{"pk": 13, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 8, "name": "data_set_id", "assigned_link": 21, "help": "The ID of the Dataset to load."}},
{"pk": 14, "model": "operation.operationparameter", "fields": {"default_value": "\"feature\"", "operation": 17, "name": "feature_name", "assigned_link": 40, "help": "Feature name."}},
{"pk": 15, "model": "operation.operationparameter", "fields": {"default_value": "\"__exact\"", "operation": 17, "name": "comparison_operator", "assigned_link": 41, "help": "You can you:\r\n__extact : Equals a single value\r\n__in : Equals any value in a list\r\n__gte: Greater than or equal to\r\n__gt: Greater than\r\n__lte: Less than or equal to\r\n__lt: Less than\r\nSpecial for date features:\r\n__year\r\n__month\r\n__day"}},
{"pk": 16, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 17, "name": "value", "assigned_link": 42, "help": "The value to be used for comparison."}},
{"pk": 17, "model": "operation.operationparameter", "fields": {"default_value": "0", "operation": 20, "name": "dicom_id", "assigned_link": 47, "help": "The ID of ImportDICOM object to store."}},
{"pk": 1, "model": "operation.operationlink", "fields": {"operation": 1, "link": 1}},
{"pk": 2, "model": "operation.operationlink", "fields": {"operation": 2, "link": 1}},
{"pk": 3, "model": "operation.operationlink", "fields": {"operation": 3, "link": 1}},
{"pk": 4, "model": "operation.operationlink", "fields": {"operation": 3, "link": 2}},
{"pk": 5, "model": "operation.operationlink", "fields": {"operation": 3, "link": 3}},
{"pk": 6, "model": "operation.operationlink", "fields": {"operation": 2, "link": 2}},
{"pk": 7, "model": "operation.operationlink", "fields": {"operation": 2, "link": 3}},
{"pk": 8, "model": "operation.operationlink", "fields": {"operation": 4, "link": 1}},
{"pk": 9, "model": "operation.operationlink", "fields": {"operation": 4, "link": 2}},
{"pk": 10, "model": "operation.operationlink", "fields": {"operation": 4, "link": 3}},
{"pk": 11, "model": "operation.operationlink", "fields": {"operation": 5, "link": 1}},
{"pk": 12, "model": "operation.operationlink", "fields": {"operation": 5, "link": 2}},
{"pk": 13, "model": "operation.operationlink", "fields": {"operation": 5, "link": 3}},
{"pk": 14, "model": "operation.operationlink", "fields": {"operation": 6, "link": 1}},
{"pk": 15, "model": "operation.operationlink", "fields": {"operation": 6, "link": 2}},
{"pk": 16, "model": "operation.operationlink", "fields": {"operation": 6, "link": 3}},
{"pk": 17, "model": "operation.operationlink", "fields": {"operation": 7, "link": 1}},
{"pk": 18, "model": "operation.operationlink", "fields": {"operation": 7, "link": 2}},
{"pk": 19, "model": "operation.operationlink", "fields": {"operation": 7, "link": 3}},
{"pk": 20, "model": "operation.operationlink", "fields": {"operation": 8, "link": 1}},
{"pk": 21, "model": "operation.operationlink", "fields": {"operation": 8, "link": 2}},
{"pk": 22, "model": "operation.operationlink", "fields": {"operation": 9, "link": 1}},
{"pk": 23, "model": "operation.operationlink", "fields": {"operation": 9, "link": 2}},
{"pk": 24, "model": "operation.operationlink", "fields": {"operation": 10, "link": 1}},
{"pk": 25, "model": "operation.operationlink", "fields": {"operation": 10, "link": 2}},
{"pk": 26, "model": "operation.operationlink", "fields": {"operation": 11, "link": 1}},
{"pk": 27, "model": "operation.operationlink", "fields": {"operation": 11, "link": 2}},
{"pk": 28, "model": "operation.operationlink", "fields": {"operation": 12, "link": 1}},
{"pk": 29, "model": "operation.operationlink", "fields": {"operation": 12, "link": 2}},
{"pk": 30, "model": "operation.operationlink", "fields": {"operation": 13, "link": 1}},
{"pk": 31, "model": "operation.operationlink", "fields": {"operation": 13, "link": 2}},
{"pk": 32, "model": "operation.operationlink", "fields": {"operation": 14, "link": 1}},
{"pk": 33, "model": "operation.operationlink", "fields": {"operation": 14, "link": 2}},
{"pk": 34, "model": "operation.operationlink", "fields": {"operation": 15, "link": 1}},
{"pk": 35, "model": "operation.operationlink", "fields": {"operation": 15, "link": 2}},
{"pk": 36, "model": "operation.operationlink", "fields": {"operation": 16, "link": 2}},
{"pk": 37, "model": "operation.operationlink", "fields": {"operation": 17, "link": 1}},
{"pk": 38, "model": "operation.operationlink", "fields": {"operation": 17, "link": 2}},
{"pk": 39, "model": "operation.operationlink", "fields": {"operation": 18, "link": 1}},
{"pk": 40, "model": "operation.operationlink", "fields": {"operation": 17, "link": 3}},
{"pk": 41, "model": "operation.operationlink", "fields": {"operation": 17, "link": 4}},
{"pk": 42, "model": "operation.operationlink", "fields": {"operation": 17, "link": 5}},
{"pk": 43, "model": "operation.operationlink", "fields": {"operation": 18, "link": 2}},
{"pk": 44, "model": "operation.operationlink", "fields": {"operation": 19, "link": 1}},
{"pk": 45, "model": "operation.operationlink", "fields": {"operation": 19, "link": 2}},
{"pk": 46, "model": "operation.operationlink", "fields": {"operation": 20, "link": 1}},
{"pk": 47, "model": "operation.operationlink", "fields": {"operation": 20, "link": 2}}]